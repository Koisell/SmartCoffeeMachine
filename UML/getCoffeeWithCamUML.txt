@startuml

actor User
participant IHM
participant FaceDetection
participant FaceRecognition
database MyDB
participant waitingCoffee

loop while there is no face
    FaceDetection -> FaceDetection: searchFace(min_length)
end
User -> FaceDetection: "user coming"
FaceDetection -> FaceDetection: takePicture()
FaceDetection -> FaceRecognition: recognizeFace(picture)
FaceRecognition -> MyDB: getDescriptors()
MyDB --> FaceRecognition

alt User is in database
    FaceRecognition -> IHM: favorite_param_user

    alt User doesn't want his/her favorite coffee or was misrecognized
        User -> IHM: stop
        User -> IHM: enter new parameters
    end

else User is not in database
    FaceRecognition -> IHM: not_found
    User -> IHM: enter parameters
end
IHM -> waitingCoffee: makeCoffee(*param)
IHM -> MyDB: saveConsumption(*param)

@enduml